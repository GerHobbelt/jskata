<html>
<head><title>jskata</title></head>
<style>
  #warn { color:red; }
  #stop { display:none; }
  #count {
</style>
<script src="jquery-1.3.2.js"></script>
<script src="../src/jskata.nofreeze.js"></script>
<script>
$(document).ready(function() {
  $("#stop").click(function() {$(this).fadeOut();});

  $("#resp").click(function() {
    var i = 0;
    jsk.nofreeze.for(
      function() { i < 100; console.log("if", i); },
      function() { console.log("inv", i); i++; console.log("after", i);},
      function fct() {
        console.log("after", i);
      },
      null,
      function() {
        console.log("obj", i);
      }
    );
    return;
    
    var i = 0;
    var f = jsk.nofreeze.for(
      function() {return i < 10}, 
      function() {i++;},
      function() {
        $("#count").append("<span>. </span>");
      },
      null,
      function() {
        console.log("stopped first", i);
      }
    );
    
    var j = 0;
    var f2 = jsk.nofreeze.for(
      function() {return j <= Number.MAX_VALUE}, 
      function() {j++},
      function() {
        $("#count").append("<span>| </span>");
      },
      null,
      function() {
        console.log("stopped second", j);
      }
    );
    
    $("#stop").fadeIn().click(function() {
      f.stop();
      setTimeout(function() {
        f2.stop(); $("#stop").fadeOut();
       }, 1000);
    });
  });
  
  $("#infinite").click(function() {
    jsk.nofreeze.stop();
    var inf = jsk.nofreeze.infinite(function() {
      $("#count").append("<span>. </span>")
    });
    
    $("#stop").fadeIn().click(function() {
      inf.stop();
    });
  });
  
  $("#each").click(function() {
    $("#count").empty();
    _.nf.each(window, function(index, el) {
      console.log("append", this);
      $("#count").append("<span>"+index+", </span>");
    });
  });
  
  $("#nonresp").click(function() {
    for (var i = 0; i < Number.MAX_VALUE; i++) {
      $("#count").append("<span>.</span>");
    }
  });
});

</script>
<body>
  <button id="resp">Start non-freezing for</button>
  <button id="nonresp">Start freezing for <span id="warn">(may crash your computer)</span></button>
  <button id="infinite">Start infinite</button>
  <button id="each">Start each</button>
  <button id="stop">Stop</button>
  <div id="count"></div>
</body>
</html>
