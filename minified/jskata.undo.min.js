(function(){var d={dids:[],undids:[],canUndo:function(){return this.dids.length>0},canRedo:function(){return this.undids.length>0},push:function(a){this.execute(null,a)},execute:function(a,c,b){var e;if(b===undefined||b===null)b={};if(this.isFct(a)&&b.async!==true)e=a();if(d.isInAsyncRedo!==true)this.undids=[];d.isInAsyncRedo=false;if(b.data)e=b.data;this.dids.push({redo:a,undo:c,wrappedUndo:function(){c(e)},options:b});this.fireEvents();return e},undo:function(){var a=this.dids&&this.dids.length>
0?this.dids.pop():null;if(this.isFct(a.wrappedUndo)){a.wrappedUndo();this.isFct(a.redo)&&this.undids.push({redo:a.redo,undo:a.undo,options:a.options})}this.fireEvents()},redo:function(){var a=this.undids&&this.undids.length>0?this.undids.pop():null;if(this.isFct(a.redo)){d.isInAsyncRedo=a.options.async;var c=a.redo();if(a.options.data)c=a.options.data;var b=function(){a.undo(c)};a.options.async!==true&&this.dids.push({redo:a.redo,undo:a.undo,wrappedUndo:b,options:a.options})}this.fireEvents()},onChange:function(){return false},
onEmpty:function(){return false},fireEvents:function(){this.onChange&&this.onChange();this.dids.length===0&&this.undids.length===0&&this.onEmpty()},isFct:function(a){return a&&typeof a=="function"}};if(typeof window.javascriptKataDotCom=="undefined")window.javascriptKataDotCom={};if(typeof window.jsKata=="undefined")window.jsKata=window.javascriptKataDotCom;if(typeof window.jsk=="undefined")window.jsk=window.javascriptKataDotCom;if(typeof window._=="undefined")window._=window.javascriptKataDotCom;
window.javascriptKataDotCom.undo=d;window.javascriptKataDotCom.u=d;window.jskataUndo=window.javascriptKataDotCom.undo})();
